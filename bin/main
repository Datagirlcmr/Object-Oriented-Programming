#!/usr/bin/env ruby

=begin
    Start the game
puts introduction
puts description
player enter their name
player1 choose its symbol
the symbol is set
It's the player1 turn
Loop {
    display the board

    The player1 enter the position of the case on the board
    If the player win then the game end or it's dram
    else

    display the board

    The player 2 enter the position of the case on the board
    If the player win then the game endor it's dram
    else
}

if game end,
    if player #{player} win, puts player wins
    if player #{player} loose, puts player loose
    If draw, puts the game is a draw
    Replay?
    
=end

class Game
    def initialize
        introduction
        @player1 =Player.new(1)
        @player2 =Player.new(2)
        @playing=true
        @player=nil
        #@board = { 1 => 1, 2 => 2, 3 => 3,4 => 4, 5 => 5, 6 => 6,7 => 7, 8 => 8, 9 => 9}
        @board = [1,2,3,4,5,6,7,8,9]
        @boardPlayer = [nil,nil,nil,nil,nil,nil,nil,nil,nil]
        play(@player1)
    end

    def introduction
        puts "Welcome to TIC TAC Toe"
        puts "Tic-tac-toe is a game for two players, X and O, who take turns marking 
        the spaces in a 3Ã—3 grid. The player who succeeds in placing 
        three of their marks in a horizontal, vertical, or diagonal row is the winner."
    end

    def play(player)
        puts "Game start"
        
        while @playing
            board      
            puts " #{player.name} It is your turn to play"
            puts "Select a move from the available moves:  1,2,3,4,5,6,7,8,9" 
            num = gets.chomp.to_i
            if num >=1 && num <=9
                if !available
                    puts "Your move is not available" 
                elsif winning 
                    puts "You Win"
                else
                    puts "Its a draw"
                end
            end

            num = num- 1
            @boardPlayer[num] = player.symbol
        end
        
    end

    def player_turn

    end
    
    def board
        lineblock= "================="
        linebreak = "----+----+-----+"
        line1=""
        line2=""
        line3=""
        (0..2).each do |x| 
            if @boardPlayer[x].nil?
                line1+="| #{x+1} |"
            else
                line1+="| #{@boardPlayer[x]} |"
            end
        end
        (3..5).each do |x|
            if @boardPlayer[x].nil?
                line2+="| #{x+1} |"
            else
                line2+="| #{@boardPlayer[x]} |"
            end
        end
        (6..8).each do |x|
            if @boardPlayer[x].nil?
                line3+="| #{x+1} |"
            else
                line3+="| #{@boardPlayer[x]} |"
            end
        end
        puts lineblock
        puts line1
        puts linebreak
        puts line2
        puts linebreak
        puts line3
        puts lineblock
        
    end


    def Win
    end

    def Loose
    end
end

class Player
    attr_reader :number, :name,:symbol

    def initialize(number, name=nil)
        @number = number
        puts "Hello new Player. What's your Name?"
        @name = gets.chomp

        if number == 1
            @symbol = "X"
            puts "Your symbol is X"
        else
            @symbol = "O"
            puts "Your symbol is O"
        end
    end
end


game = Game.new()



